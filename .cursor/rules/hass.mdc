---
alwaysApply: true
---

# Home Assistant Automation Project

This project is a subset of Home Assistant scripts and automations as well as AppDaemon apps. The home-assistant YAML has been copy pasted from the Home Assistant web based YAML editor into text files here to make them eaiser to edit as well as provide context when creating new automations what existing ones will be doing. The AppDeamon python has been written in this repo from the beginning. 

The inovelli folder contains automations mainly driving inovelli smart presence detecting switches. The parameters for these switches may be found at https://help.inovelli.com/en/articles/12820312-blue-series-mmwave-presence-dimmer-switch-parameters.

## MCP Server

You are running in an instance of cursor which is configured to use [ha-mcp](https://github.com/homeassistant-ai/ha-mcp). You may make tool calls using this to access what is running in the production smart home environment which we are developing new capabilites for.  

If you don't know the exact name of an entity or attribute make sure to use the tool calls to search what exists.

## AppDaemon

AddDaemon has it's own rules that apply to the folders. It is recommended agents are familiar with it's documentation from [here](https://appdaemon.readthedocs.io/en/latest/) before programming the apps as they are not stadard python programs but plug-in to the AppDaemon docker which manages their execution. AppDaemon is also setup to run in the .venv or .venv-wsl directories of this repositories so we can test new apps and features before deploying them to the production server. Deployment is handled with a script that copies the files to the docker's config share, mounted at x:/. 

## Critical Information

### Inovelli hold LED colors are state

- **Reserved colors**: Any LED bar color used to indicate “hold” must be treated as state and must be reserved for that single purpose (do not reuse for other notifications).
- **Manual vs automation holds**: Use different, fixed colors to distinguish sources.
  - Manual hold: `input_text.inovelli_manual_hold`
  - Cleaners-mode/automation hold: `input_text.inovelli_auto_hold`
- **Clearing behavior**: Automations that clear holds must only clear holds matching the automation hold color, so manual holds are preserved.

